<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>User Profile</title>

    <div th:replace="partials/head :: head"></div>

</head>
    <body class="profile-body">
        <div th:replace="partials/navbar.html :: navbar"></div>

                <div class = "container">
                    <div class = "row">
                        <div class ="col-lg-12">
                            <h1>Dashboard</h1>
                            <div>
                                <div class="row">
                                    <div class="col-3">
                                        <p>Welcome,<span
                                                th:text ="${#authentication.getPrincipal().getUsername()}"></span>
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <section class="text-center">
                                <h4 class="posts-h4"><strong>Your Posts</strong></h4>
                                   <div class = "row">


                                       <div class="col-lg-4 col-md-12 mb-4" th:each="post : ${posts}"
                                      th:if="${post.getUser().getId()} == ${#authentication.getPrincipal().getId()}">

                                        <div class="bg-image hover-overlay ripple" data-mdb-ripple-color="light">
                                            <img src="https://mdbootstrap.com/img/new/standard/nature/184.jpg" class="img-fluid" />
                                            <a href="#!">
                                                <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>
                                            </a>
                                        </div>
                                 <div class="card-body">
                                <h5 class="card-title"><strong><span th:text="${post.getTitle()}"></span></strong></h5>
                                <p class="card-text"><span th:text="${post.getBody()}"></span></p>
                                <p>submitted by: <span th:text="${post.user.getUsername()}"></span></p>
                                <span class="post-meta">Posted on: <span th:text="${#dates.format(post.createDate,'MMM dd YYYY')}"></span></span>
                                     <div class="col-sm-10">
                                        <a th:href="@{'/posts/edit/' + ${post.getId()}}" class="btn btn-primary">Edit</a>
                                        <a th:href="@{'/posts/delete/' + ${post.getId()}}" class="btn btn-primary">Delete</a>
                                     </div>

                            </div>
                                    </div>
                                   </div>
                            </section>
                        </div>
                         </div>
                    </div>
                </div>
            </div>





<!--                <div>-->
<!--                    Welcome, <span class="text-capitalize"-->
<!--                                   th:text ="${#authentication.getPrincipal().getUsername()}"></span>-->
<!--                </div>-->

<!--                <div>-->
<!--                    <th:block th:each="post : ${posts}" th:if="${user} ==  $post.getUser()}">-->
<!--                        <div>-->
<!--                            <div class="row">-->
<!--                                <div class="col-3">-->
<!--                                    <p><span th:text="${post.getTitle()}"</span></p>-->
<!--                                    <p><span th:text="${post.getBody()}"</span></p>-->

<!--                                    <a th:href="@{'/posts/edit/' + ${post.getId()}}"><button class="btn"></button></a>-->

<!--                                </div>-->



<!--                            </div>-->

<!--                        </div>-->



<!--                    </th:block>-->




<!--                </div>-->




<!--            </div>-->





        <script th:replace="partials/script.html :: script"></script>
    </body>
</html>